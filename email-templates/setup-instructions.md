# UniLingo Email Setup Instructions

## ðŸš€ Complete Setup Guide for Brevo SMTP + Custom Templates

### **Step 1: Brevo Account Setup**

1. **Create Brevo Account**
   - Go to [brevo.com](https://brevo.com)
   - Sign up for an account
   - Choose the appropriate plan (Free tier includes 300 emails/day)

2. **Verify Your Domain**
   - Go to **Settings** â†’ **Domains**
   - Add your domain (e.g., `unilingo.co.uk`)
   - Follow the DNS setup instructions:
     ```
     SPF Record: v=spf1 include:spf.brevo.com ~all
     DKIM Record: [Generated by Brevo]
     DMARC Record: v=DMARC1; p=quarantine; rua=mailto:dmarc@unilingo.co.uk
     ```

3. **Get SMTP Credentials**
   - Go to **Settings** â†’ **SMTP & API**
   - Click **SMTP** tab
   - Generate a new SMTP key
   - Note down your SMTP settings:
     ```
     SMTP Server: smtp-relay.brevo.com
     Port: 587 (TLS) or 465 (SSL)
     Username: [Your Brevo Email]
     Password: [Your SMTP Key]
     ```

### **Step 2: Supabase Configuration**

1. **Access Supabase Dashboard**
   - Go to your Supabase project dashboard
   - Navigate to **Authentication** â†’ **Settings**

2. **Configure SMTP Settings**
   - Scroll down to **SMTP Configuration**
   - Enable **Custom SMTP**
   - Enter the following settings:
     ```
     SMTP Host: smtp-relay.brevo.com
     SMTP Port: 587
     SMTP User: [Your Brevo Email]
     SMTP Password: [Your Brevo SMTP Key]
     Sender Email: noreply@unilingo.co.uk
     Sender Name: UniLingo
     ```

3. **Test SMTP Connection**
   - Click **Test SMTP Connection**
   - Verify the test email is received
   - Check Brevo dashboard for delivery status

### **Step 3: Upload Custom Templates**

1. **Access Email Templates**
   - In Supabase, go to **Authentication** â†’ **Templates**

2. **Update Confirm Signup Template**
   - Click on **Confirm Signup** template
   - Copy the content from `confirmation-email.html`
   - Paste into the **Message** field
   - Update the **Subject** to: `Welcome to UniLingo! Confirm your email`
   - Click **Save**

3. **Update Reset Password Template**
   - Click on **Reset Password** template
   - Copy the content from `password-reset-email.html`
   - Paste into the **Message** field
   - Update the **Subject** to: `Reset your UniLingo password`
   - Click **Save**

4. **Update Magic Link Template**
   - Click on **Magic Link** template
   - Copy the content from `magic-link-email.html`
   - Paste into the **Message** field
   - Update the **Subject** to: `Your UniLingo sign-in link`
   - Click **Save**

5. **Update Email Change Template**
   - Click on **Email Change** template
   - Copy the content from `email-change-email.html`
   - Paste into the **Message** field
   - Update the **Subject** to: `Confirm your new email address`
   - Click **Save**

### **Step 4: Test the Complete Flow**

1. **Test Email Confirmation**
   - Create a new test account
   - Check if the confirmation email is received
   - Verify the email styling and branding
   - Test the confirmation link

2. **Test Password Reset**
   - Request a password reset
   - Check if the reset email is received
   - Verify the reset link works

3. **Test Magic Link**
   - Request a magic link sign-in
   - Check if the magic link email is received
   - Verify the sign-in link works

### **Step 5: Monitor & Optimize**

1. **Brevo Dashboard Monitoring**
   - Check delivery rates
   - Monitor bounce rates
   - Track open and click rates
   - Review spam complaints

2. **Supabase Monitoring**
   - Check authentication logs
   - Monitor email send failures
   - Track user signup completion rates

3. **Email Client Testing**
   - Test in Gmail, Outlook, Apple Mail
   - Check mobile email clients
   - Verify responsive design

## ðŸ”§ Troubleshooting

### **Common Issues**

1. **SMTP Connection Failed**
   - Verify SMTP credentials
   - Check domain verification status
   - Ensure firewall allows SMTP traffic

2. **Emails Not Delivered**
   - Check spam folder
   - Verify domain reputation
   - Review Brevo delivery logs

3. **Template Not Rendering**
   - Check HTML syntax
   - Verify template variables
   - Test in email client preview

4. **Links Not Working**
   - Verify deep link configuration
   - Check app URL scheme
   - Test link in browser

### **Support Resources**

- **Brevo Support**: [help.brevo.com](https://help.brevo.com)
- **Supabase Docs**: [supabase.com/docs](https://supabase.com/docs)
- **Email Testing**: [mail-tester.com](https://mail-tester.com)

## ðŸ“Š Expected Results

After setup, you should see:
- âœ… Professional, branded email templates
- âœ… High delivery rates (95%+)
- âœ… Improved user experience
- âœ… Better email engagement
- âœ… Reduced spam complaints
- âœ… Consistent branding across all emails

## ðŸŽ¯ Next Steps

1. **A/B Testing**: Test different email designs
2. **Analytics**: Set up email tracking
3. **Automation**: Create email sequences
4. **Personalization**: Add dynamic content
5. **Optimization**: Continuously improve based on metrics

---

**Note**: Keep your SMTP credentials secure and never commit them to version control. Use environment variables for sensitive configuration.
